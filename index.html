<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Estimation budget tatouage — Caprice Rose</title>
  <style>
    :root { color-scheme: light; }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin:0; padding: 22px; background-color: #fdfbfb; }
    .wrap { max-width: 720px; margin: 0 auto; }
    .card { border: 1px solid #e0e0e0; border-radius: 20px; padding: 24px; background: white; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    h1 { font-size: 26px; line-height: 1.15; margin: 0 0 10px 0; color: #333; }
    .intro { font-size: 14px; line-height: 1.55; margin: 0 0 14px 0; opacity: .8; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    label { display:block; font-size: 13px; font-weight: 600; margin-top: 12px; color: #555; }
    input, select { width: 100%; padding: 12px; margin-top: 6px; border-radius: 12px; border: 1px solid #cfcfcf; font-size: 15px; box-sizing: border-box; }
    
    .desc-box { 
      margin-top: 10px; 
      padding: 12px; 
      border-radius: 10px; 
      background: #f9fafb; 
      border-left: 3px solid #be185d;
      font-size: 13px; 
      line-height: 1.4;
      color: #444;
    }
    .desc-box b { color: #be185d; }

    .info-sub { font-size: 11px; color: #777; margin-left: 28px; margin-top: -2px; line-height: 1.3; margin-bottom: 8px; }
    .checks { margin-top: 15px; display:grid; gap: 12px; }
    .check { display:flex; gap: 10px; align-items:center; font-size: 14px; cursor: pointer; }
    .check input { width: 18px; height: 18px; margin: 0; flex-shrink: 0; }
    
    .result { margin-top: 20px; border-radius: 16px; padding: 18px; border: 1px dashed #ec4899; background: #fff5f7; }
    
    .alert-mini { 
      margin-top: 20px; 
      border-radius: 16px; 
      padding: 18px; 
      border: 1px dashed #ec4899; 
      background: #fff5f7; 
      color: #333; 
      font-size: 14px; 
      line-height: 1.5; 
      font-weight: 500; 
      text-align: center; 
    }

    .kpi { display:flex; gap: 16px; flex-wrap: wrap; font-size: 13px; opacity: .85; }
    .price { font-size: 32px; font-weight: 800; margin-top: 6px; color: #be185d; }
    .muted { opacity: .75; }
    .pill { display:inline-block; font-size: 11px; font-weight: 700; padding: 6px 12px; border-radius: 999px; background: #fdf2f8; border: 1px solid #fbcfe8; color: #be185d; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
    .mono { font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace; font-weight: bold; }
    
    button { margin-top: 18px; width: 100%; padding: 14px; border-radius: 14px; border: none; background: #111; color:#fff; font-size: 16px; font-weight: 600; cursor:pointer; }
    .cta-booking { display: none; margin-top: 20px; text-decoration: none; text-align: center; padding: 16px; border-radius: 14px; background: linear-gradient(135deg, #ec4899 0%, #be185d 100%); color: white; font-weight: 700; font-size: 16px; }
    
    @media (max-width: 520px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="pill">Estimation indicative — pas un devis</div>
      <h1>Estime le budget de ton tatouage</h1>
      <p class="intro">Cette estimation te donne une idée du budget selon la taille et le niveau de détail. Le prix final sera confirmé lors de notre discussion.</p>
      
      <div class="grid">
        <div><label for="w">Largeur (cm)</label><input id="w" type="number" placeholder="Ex: 5" /></div>
        <div><label for="h">Hauteur (cm)</label><input id="h" type="number" placeholder="Ex: 15" /></div>
      </div>

      <label for="detail">Niveau de détail</label>
      <select id="detail" onchange="updateDesc()">
        <option value="0.9">Simple</option>
        <option value="1.0" selected>Standard</option>
        <option value="1.2">Complexe</option>
        <option value="1.4">Très détaillé</option>
      </select>
      
      <div id="detail-desc" class="desc-box">
        <b>Standard :</b> Composition florale équilibrée (max 3 fleurs) avec ombrages légers.
      </div>

      <div class="checks">
        <div>
          <label class="check"><input id="zone" type="checkbox" /> Zone complexe</label>
          <div class="info-sub">(Dos, buste, ventre, arrondi de l'épaule...)</div>
        </div>
        <div>
          <label class="check"><input id="textured" type="checkbox" /> Peau texturée</label>
          <div class="info-sub">(Cicatrices, vergetures...)</div>
        </div>
      </div>

      <label for="colors">Couleurs souhaitées (+30€ / couleur)</label>
      <select id="colors">
        <option value="0" selected>Noir et gris uniquement</option>
        <option value="1">1 couleur</option>
        <option value="2">2 couleurs</option>
        <option value="3">3 couleurs</option>
        <option value="4">4 couleurs</option>
        <option value="5">5 couleurs ou plus</option>
      </select>

      <button id="calc" type="button" onclick="compute()">Calculer mon estimation</button>

      <div id="mini-alert" class="alert-mini" style="display:none;">
        ✨ Pour les petits projets (mini-tatouages) ou tatouages grands mais très épurés, merci de me contacter directement pour un devis personnalisé.
      </div>

      <div id="result-box" class="result" style="display:none;">
        <div class="kpi">
          <div><span class="muted">Surface :</span> <span id="area" class="mono">—</span> <span class="muted">cm²</span></div>
          <div><span class="muted">Temps approx :</span> <span id="time" class="mono">—</span> <span class="muted">h</span></div>
        </div>
        <div class="price">≈ <span id="price" class="mono">—</span> €</div>
      </div>

      <a href="https://app.encre.me/caprice_rose/book" id="booking-btn" class="cta-booking">Réserver mon projet / Me contacter</a>
    </div>
  </div>

<script>
  const descriptions = {
    "0.9": "<b>Simple :</b> Projet épuré, ligne claire uniquement. (Ex : une fleur seule, peu ou pas d'ombrage).",
    "1.0": "<b>Standard :</b> Composition florale équilibrée (max 3 fleurs) avec ombrages légers.",
    "1.2": "<b>Complexe :</b> Composition riche (max 4 fleurs) incluant un élément central détaillé (animal, objet, mandala).",
    "1.4": "<b>Très détaillé :</b> Grande pièce ornementale, plus de 5 fleurs, avec un travail de textures et détails poussés."
  };

  function updateDesc() {
    const val = document.getElementById('detail').value;
    document.getElementById('detail-desc').innerHTML = descriptions[val];
  }

  function compute() {
    const BASE_PRICE_CM2 = 1.80; 
    const LARGE_PRICE_CM2 = 1.25; 
    const MIN_PRICE = 150; 
    const LIMIT_SURFACE = 50;

    const w = parseFloat(document.getElementById('w').value) || 0;
    const h = parseFloat(document.getElementById('h').value) || 0;
    const area = w * h;

    const resultBox = document.getElementById('result-box');
    const miniAlert = document.getElementById('mini-alert');
    const bookingBtn = document.getElementById('booking-btn');

    if (area <= 0) { alert("Indique les dimensions !"); return; }
    
    if (area < LIMIT_SURFACE) {
      miniAlert.style.display = 'block';
      resultBox.style.display = 'none';
      bookingBtn.style.display = 'block';
      return;
    }

    let basePrice = area <= 100 ? area * BASE_PRICE_CM2 : (100 * BASE_PRICE_CM2) + ((area - 100) * LARGE_PRICE_CM2);
    
    const detailCoef = parseFloat(document.getElementById('detail').value);
    const texturCoef = document.getElementById('textured').checked ? 0.2 : 0.0;
    const zoneExtra = document.getElementById('zone').checked ? (area < 200 ? 50 : 100) : 0;
    const colorExtra = (parseInt(document.getElementById('colors').value) || 0) * 30;

    const coefTotal = detailCoef + texturCoef;
    let price = (basePrice * coefTotal) + zoneExtra + colorExtra;
    price = Math.max(MIN_PRICE, price);
    
    document.getElementById('area').textContent = area.toFixed(0);
    document.getElementById('time').textContent = (area / 110 * coefTotal).toFixed(1);
    document.getElementById('price').textContent = (Math.round(price / 10) * 10).toFixed(0);
    
    resultBox.style.display = 'block';
    miniAlert.style.display = 'none';
    bookingBtn.style.display = 'block';
  }
</script>
</body>
</html>
